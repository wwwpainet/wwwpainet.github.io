<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用vw实现移动端适配 | WP-docs</title>
    <meta name="description" content="Welcome to my docs">
    
    
    <link rel="preload" href="/assets/css/0.styles.de3e197a.css" as="style"><link rel="preload" href="/assets/js/app.5c21f1ce.js" as="script"><link rel="preload" href="/assets/js/2.25b27612.js" as="script"><link rel="preload" href="/assets/js/35.5c1980ae.js" as="script"><link rel="prefetch" href="/assets/js/10.71a6485a.js"><link rel="prefetch" href="/assets/js/11.8dd74bb4.js"><link rel="prefetch" href="/assets/js/12.9b799416.js"><link rel="prefetch" href="/assets/js/13.c9cf029f.js"><link rel="prefetch" href="/assets/js/14.8882fdec.js"><link rel="prefetch" href="/assets/js/15.56c79fdc.js"><link rel="prefetch" href="/assets/js/16.c020c19c.js"><link rel="prefetch" href="/assets/js/17.948ecd99.js"><link rel="prefetch" href="/assets/js/18.d45c2b4c.js"><link rel="prefetch" href="/assets/js/19.fc0b80a4.js"><link rel="prefetch" href="/assets/js/20.36066d65.js"><link rel="prefetch" href="/assets/js/21.3d5137da.js"><link rel="prefetch" href="/assets/js/22.bb233a83.js"><link rel="prefetch" href="/assets/js/23.f5c9008c.js"><link rel="prefetch" href="/assets/js/24.3552b121.js"><link rel="prefetch" href="/assets/js/25.29d8def4.js"><link rel="prefetch" href="/assets/js/26.6e5b3bbc.js"><link rel="prefetch" href="/assets/js/27.17318391.js"><link rel="prefetch" href="/assets/js/28.0eefa9ef.js"><link rel="prefetch" href="/assets/js/29.ecec8995.js"><link rel="prefetch" href="/assets/js/3.9e8a07c9.js"><link rel="prefetch" href="/assets/js/30.34e66b86.js"><link rel="prefetch" href="/assets/js/31.7d45bd5b.js"><link rel="prefetch" href="/assets/js/32.748452ad.js"><link rel="prefetch" href="/assets/js/33.f4b89b95.js"><link rel="prefetch" href="/assets/js/34.d51375bc.js"><link rel="prefetch" href="/assets/js/36.d793beef.js"><link rel="prefetch" href="/assets/js/37.d7c40923.js"><link rel="prefetch" href="/assets/js/38.472d02b7.js"><link rel="prefetch" href="/assets/js/4.6f6e2024.js"><link rel="prefetch" href="/assets/js/5.be0f20bf.js"><link rel="prefetch" href="/assets/js/6.8bbc05a5.js"><link rel="prefetch" href="/assets/js/7.80024fef.js"><link rel="prefetch" href="/assets/js/8.59ce47c5.js"><link rel="prefetch" href="/assets/js/9.1660c366.js">
    <link rel="stylesheet" href="/assets/css/0.styles.de3e197a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">WP-docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/CSS/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/Vue/" class="nav-link router-link-active">Vue</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/CSS/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/Vue/" class="nav-link router-link-active">Vue</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue技巧</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frame/Vue/" class="sidebar-link">Vue 使用中的技巧 (-)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frame/Vue/使用vw实现移动端适配.html" class="active sidebar-link">使用vw实现移动端适配</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frame/Vue/如何构建运行良好的Vue组件.html" class="sidebar-link">如何构建运行良好的Vue组件</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>快速玩转vue-cli3</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="使用vw实现移动端适配"><a href="#使用vw实现移动端适配" aria-hidden="true" class="header-anchor">#</a> 使用vw实现移动端适配</h1> <h3 id="安装postcss插件"><a href="#安装postcss插件" aria-hidden="true" class="header-anchor">#</a> 安装PostCSS插件</h3> <p>通过Vue-cli构建的项目，在项目的根目录下有一个.postcssrc.js，默认情况下已经有了：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span> 
  <span class="token string">&quot;plugins&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> 
      <span class="token string">&quot;postcss-import&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
      <span class="token string">&quot;postcss-url&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
      <span class="token string">&quot;autoprefixer&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>对应我们开头列的的PostCSS插件清单，现在已经具备了：</p> <p><a href="https://github.com/postcss/postcss-import/" target="_blank" rel="noopener noreferrer">postcss-import<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/postcss/postcss-url/" target="_blank" rel="noopener noreferrer">postcss-url<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/postcss/autoprefixer/" target="_blank" rel="noopener noreferrer">autoprefixer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>简单的说一下这几个插件。</p> <h3 id="postcss-import"><a href="#postcss-import" aria-hidden="true" class="header-anchor">#</a> postcss-import</h3> <p>postcss-import目前使用的是默认配置。只在.postcssrc.js文件中引入了该插件。
postcss-import主要功有是解决@import引入路径问题。使用这个插件，可以让你很轻易的使用本地文件、node_modules或者web_modules的文件。这个插件配合postcss-url让你引入文件变得更轻松</p> <h3 id="postcss-url"><a href="#postcss-url" aria-hidden="true" class="header-anchor">#</a> postcss-url</h3> <p>postcss-url该插件主要用来处理文件，比如图片文件、字体文件等引用路径的处理。
在Vue项目中，vue-loader已具有类似的功能，只需要配置中将vue-loader配置进去。</p> <h3 id="autoprefixer"><a href="#autoprefixer" aria-hidden="true" class="header-anchor">#</a> autoprefixer</h3> <p>autoprefixer插件是用来自动处理浏览器前缀的一个插件。如果你配置了postcss-cssnext，其中就已具备了autoprefixer的功能。在配置的时候，未显示的配置相关参数的话，表示使用的是Browserslist指定的列表参数，你也可以像这样来指定last 2 versions 或者 &gt; 5%。</p> <p>如此一来，你在编码时不再需要考虑任何浏览器前缀的问题，可以专心撸码。这也是PostCSS最常用的一个插件之一。</p> <h3 id="其他插件"><a href="#其他插件" aria-hidden="true" class="header-anchor">#</a> 其他插件</h3> <p>Vue-cli默认配置了上述三个PostCSS插件，但要完成vw的布局兼容方案，或者说让我们能更专心的撸码，还需要配置下面的几个PostCSS插件：
<a href="https://github.com/yisibl/postcss-aspect-ratio-mini/" target="_blank" rel="noopener noreferrer">postcss-aspect-ratio-mini<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/evrone/postcss-px-to-viewport/" target="_blank" rel="noopener noreferrer">postcss-px-to-viewport<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/jonathantneal/postcss-write-svg/" target="_blank" rel="noopener noreferrer">postcss-write-svg<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/MoOx/postcss-cssnext/" target="_blank" rel="noopener noreferrer">postcss-cssnext<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/cssnano/cssnano/" target="_blank" rel="noopener noreferrer">cssnano<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-npm line-numbers-mode"><pre class="language-text"><code>npm i postcss-aspect-ratio-mini postcss-px-to-viewport postcss-write-svg postcss-cssnext postcss-viewport-units cssnano --S
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装成功之后，在项目根目录下的package.json文件中，可以看到新安装的依赖包：</p> <p>接下来在postcss.config.js文件对新安装的PostCSS插件进行配置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;postcss-import&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-url&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-aspect-ratio-mini&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-write-svg&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      utf8<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-cssnext&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-px-to-viewport&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      viewportWidth<span class="token punctuation">:</span> <span class="token number">750</span><span class="token punctuation">,</span> <span class="token comment">// // 视窗的宽度，对应的是我们设计稿的宽度，一般是750</span>
      viewportHeight<span class="token punctuation">:</span> <span class="token number">1334</span><span class="token punctuation">,</span> <span class="token comment">// // 视窗的高度，根据750设备的宽度来指定，一般指定1334，也可以不配置</span>
      unitPrecision<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// 指定`px`转换为视窗单位值的小数位数（很多时候无法整除）</span>
      viewportUnit<span class="token punctuation">:</span> <span class="token string">'vw'</span><span class="token punctuation">,</span> <span class="token comment">// 指定需要转换成的视窗单位，建议使用vw</span>
      selectorBlackList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.ignore'</span><span class="token punctuation">,</span> <span class="token string">'.hairlines'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 指定不转换为视窗单位的类，可以自定义，可以无限添加,建议定义一至两个通用的类名</span>
      minPixelValue<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 小于或等于`1px`不转换为视窗单位，你也可以设置为你想要的值</span>
      mediaQuery<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment">// 允许在媒体查询中转换`px`</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;cssnano&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      preset<span class="token punctuation">:</span> <span class="token string">&quot;advanced&quot;</span><span class="token punctuation">,</span>
      autoprefixer<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token string">&quot;postcss-zindex&quot;</span><span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><blockquote><p>特别声明：由于cssnext和cssnano都具有autoprefixer,事实上只需要一个，所以把默认的autoprefixer删除掉，然后把cssnano中的autoprefixer设置为false。对于其他的插件使用，稍后会简单的介绍。</p></blockquote> <h3 id="postcss-cssnext"><a href="#postcss-cssnext" aria-hidden="true" class="header-anchor">#</a> postcss-cssnext</h3> <p>postcss-cssnext其实就是cssnext。该插件可以让我们使用CSS未来的特性，其会对这些特性做相关的兼容性处理。其包含的特性主要有：
有关于cssnext的每个特性的操作文档，可以点击<a href="https://cssnext.io/features/#automatic-vendor-prefixes/" target="_blank" rel="noopener noreferrer">这里浏览<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="cssnano"><a href="#cssnano" aria-hidden="true" class="header-anchor">#</a> cssnano</h3> <p>cssnano主要用来压缩和清理CSS代码。在Webpack中，cssnano和css-loader捆绑在一起，所以不需要自己加载它。不过你也可以使用postcss-loader显式的使用cssnano。有关于cssnano的详细文档，可以点击<a href="https://cssnano.co/guides/getting-started/" target="_blank" rel="noopener noreferrer">这里浏览<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>在cssnano的配置中，使用了preset: &quot;advanced&quot;，所以我们需要另外安装：</p> <div class="language-npm line-numbers-mode"><pre class="language-text"><code>npm i cssnano-preset-advanced --save-dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>cssnano集成了一些<a href="https://cssnano.co/guides/optimisations/" target="_blank" rel="noopener noreferrer">其他的PostCSS插件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，如果你想禁用cssnano中的某个插件的时候，可以像下面这样操作：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">&quot;cssnano&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> 
    autoprefixer<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string">&quot;postcss-zindex&quot;</span><span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上面的代码把autoprefixer和postcss-zindex禁掉了。前者是有重复调用，后者是一个讨厌的东东。只要启用了这个插件，z-index的值就会重置为1。这是一个天坑，千万记得将postcss-zindex设置为false。</p> <h3 id="postcss-px-to-viewport"><a href="#postcss-px-to-viewport" aria-hidden="true" class="header-anchor">#</a> postcss-px-to-viewport</h3> <p>postcss-px-to-viewport插件主要用来把px单位转换为vw、vh、vmin或者vmax这样的视窗单位，也是vw适配方案的核心插件之一。</p> <p>在配置中需要配置相关的几个关键参数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">&quot;postcss-px-to-viewport&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> 
  viewportWidth<span class="token punctuation">:</span> <span class="token number">750</span><span class="token punctuation">,</span> <span class="token comment">// // 视窗的宽度，对应的是我们设计稿的宽度，一般是750</span>
  viewportHeight<span class="token punctuation">:</span> <span class="token number">1334</span><span class="token punctuation">,</span> <span class="token comment">// // 视窗的高度，根据750设备的宽度来指定，一般指定1334，也可以不配置</span>
  unitPrecision<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// 指定`px`转换为视窗单位值的小数位数（很多时候无法整除）</span>
  viewportUnit<span class="token punctuation">:</span> <span class="token string">'vw'</span><span class="token punctuation">,</span> <span class="token comment">// 指定需要转换成的视窗单位，建议使用vw</span>
  selectorBlackList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.ignore'</span><span class="token punctuation">,</span> <span class="token string">'.hairlines'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 指定不转换为视窗单位的类，可以自定义，可以无限添加,建议定义一至两个通用的类名</span>
  minPixelValue<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 小于或等于`1px`不转换为视窗单位，你也可以设置为你想要的值</span>
  mediaQuery<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment">// 允许在媒体查询中转换`px`</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>目前出视觉设计稿，我们都是使用750px宽度的，那么100vw = 750px，即1vw = 7.5px。那么我们可以根据设计图上的px值直接转换成对应的vw值。在实际撸码过程，不需要进行任何的计算，直接在代码中写px，比如</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.test</span> <span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> .5px solid black<span class="token punctuation">;</span>
    <span class="token property">border-bottom-width</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">[w-188-246]</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 188px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>编译出来的CSS：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.test</span> <span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> .5px solid #000<span class="token punctuation">;</span>
    <span class="token property">border-bottom-width</span><span class="token punctuation">:</span> .533vw<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.867vw<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 2.667vw<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
    
<span class="token selector">[w-188-246]</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 25.067vw<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>在不想要把px转换为vw的时候，首先在对应的元素（html）中添加配置中指定的类名.ignore或.hairlines(.hairlines一般用于设置border-width:0.5px的元素中)</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box ignore<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>写CSS的时候：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.ignore</span> <span class="token punctuation">{</span> 
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span> 
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 

<span class="token selector">.box</span> <span class="token punctuation">{</span> 
    <span class="token property">width</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span> 
    <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 

<span class="token selector">.hairlines</span> <span class="token punctuation">{</span> 
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 0.5px solid red<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>编译出来的CSS:</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.box</span> <span class="token punctuation">{</span> 
    <span class="token property">width</span><span class="token punctuation">:</span> 24vw<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 40vw<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
<span class="token selector">.ignore</span> <span class="token punctuation">{</span> 
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span> <span class="token comment">/*.box元素中带有.ignore类名，在这个类名写的`px`不会被转换*/</span> 
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 

<span class="token selector">.hairlines</span> <span class="token punctuation">{</span> 
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 0.5px solid red<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>上面解决了px到vw的转换计算。那么在哪些地方可以使用vw来适配我们的页面。根据相关的测试：</p> <ul><li>容器适配，可以使用vw</li> <li>文本的适配，可以使用vw</li> <li>大于1px的边框、圆角、阴影都可以使用vw</li> <li>内距和外距，可以使用vw</li></ul> <h3 id="postcss-aspect-ratio-mini"><a href="#postcss-aspect-ratio-mini" aria-hidden="true" class="header-anchor">#</a> postcss-aspect-ratio-mini</h3> <p><a href="https://github.com/yisibl/postcss-aspect-ratio-mini/" target="_blank" rel="noopener noreferrer">postcss-aspect-ratio-mini<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>主要用来处理元素容器宽高比。在实际使用的时候，具有一个默认的结构</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">aspectratio</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">aspectratio-content</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在实际使用的时候，可以把自定义属性aspectratio和aspectratio-content换成相应的类名，比如：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>aspectratio<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>aspectratio-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>我个人比较喜欢用自定义属性，它和类名所起的作用是同等的。结构定义之后，需要在你的样式文件中添加一个统一的宽度比默认属性</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">aspectratio</span> <span class="token attr-name">w-188-246</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>color<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">[aspectratio]</span> <span class="token punctuation">{</span> 
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 

<span class="token selector">[aspectratio]::before</span> <span class="token punctuation">{</span> 
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span> 
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span> 
    <span class="token property">width</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span> 
    <span class="token property">margin-left</span><span class="token punctuation">:</span> -1px<span class="token punctuation">;</span> 
    <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 

<span class="token selector">[aspectratio-content]</span> <span class="token punctuation">{</span> 
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span> 
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> 
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> 
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> 
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> 
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> 
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>如果想要做一个188:246（188是容器宽度，246是容器高度）这样的比例容器，只需要这样使用：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">[w-188-246]</span> <span class="token punctuation">{</span> 
    <span class="token property">aspect-ratio</span><span class="token punctuation">:</span> <span class="token string">'188:246'</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>有一点需要特别注意：aspect-ratio属性不能和其他属性写在一起，否则编译出来的属性只会留下aspect-ratio的值，比如：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">[w-188-246]</span> <span class="token punctuation">{</span> 
    <span class="token property">width</span><span class="token punctuation">:</span> 188px<span class="token punctuation">;</span> 
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 

<span class="token selector">[w-188-246]</span> <span class="token punctuation">{</span> 
    <span class="token property">aspect-ratio</span><span class="token punctuation">:</span> <span class="token string">'188:246'</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>这个时候，编译出来的CSS就正常了：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">[w-188-246]</span> <span class="token punctuation">{</span> 
    <span class="token property">width</span><span class="token punctuation">:</span> 25.067vw<span class="token punctuation">;</span> 
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 

<span class="token selector">[w-188-246]:before</span> <span class="token punctuation">{</span> 
    <span class="token property">padding-top</span><span class="token punctuation">:</span> 130.85106382978725%<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>目前采用PostCSS插件只是一个过渡阶段，在将来我们可以直接在CSS中使用aspect-ratio属性来实现长宽比</p> <h3 id="postcss-write-svg"><a href="#postcss-write-svg" aria-hidden="true" class="header-anchor">#</a> postcss-write-svg</h3> <p><a href="https://github.com/jonathantneal/postcss-write-svg/" target="_blank" rel="noopener noreferrer">postcss-write-svg<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>插件主要用来处理移动端1px的解决方案。该插件主要使用的是border-image和background来做1px的相关处理。比如：</p> <div class="language-sass line-numbers-mode"><pre class="language-sass"><code><span class="token atrule-line"><span class="token atrule">@svg</span> 1px-border { </span>
<span class="token property-line">    <span class="token property">height</span><span class="token punctuation">:</span> 2px; </span>
<span class="token atrule-line">    <span class="token atrule">@rect</span> { </span>
<span class="token property-line">        <span class="token property">fill</span><span class="token punctuation">:</span> var(--color, black); </span>
<span class="token property-line">        <span class="token property">width</span><span class="token punctuation">:</span> 100<span class="token operator">%</span>; </span>
<span class="token property-line">        <span class="token property">height</span><span class="token punctuation">:</span> 50<span class="token operator">%</span>; </span>
    <span class="token selector">} </span>
<span class="token selector">} </span>
<span class="token selector">.example { border: 1px solid transparent; border-image: </span><span class="token function">svg</span><span class="token selector">(1px-border </span><span class="token function">param</span><span class="token selector">(--color #00b1ff)) 2 2 stretch; }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>编译出来的CSS:</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.example</span> <span class="token punctuation">{</span> 
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid transparent<span class="token punctuation">;</span> 
    <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' height='2px'%3E%3Crect fill='%2300b1ff' width='100%25' height='50%25'/%3E%3C/svg%3E&quot;<span class="token punctuation">)</span></span> 2 2 stretch<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上面演示的是使用border-image方式，除此之外还可以使用background-image来实现。比如：</p> <div class="language-sass line-numbers-mode"><pre class="language-sass"><code><span class="token atrule-line"><span class="token atrule">@svg</span> square { </span>
<span class="token atrule-line">    <span class="token atrule">@rect</span> { fill: var(--color, black); </span>
<span class="token property-line">        <span class="token property">width</span><span class="token punctuation">:</span> 100<span class="token operator">%</span>; </span>
<span class="token property-line">        <span class="token property">height</span><span class="token punctuation">:</span> 100<span class="token operator">%</span>; </span>
    <span class="token selector">} </span>
<span class="token selector">} </span>
<span class="token selector">#example { background: white </span><span class="token function">svg</span><span class="token selector">(square </span><span class="token function">param</span><span class="token selector">(--color #00b1ff)); }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>编译出来的CSS:</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">#example</span> <span class="token punctuation">{</span> 
    <span class="token property">background</span><span class="token punctuation">:</span> white <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Crect fill='%2300b1ff' width='100%25' height='100%25'/%3E%3C/svg%3E&quot;<span class="token punctuation">)</span></span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>解决1px的方案除了这个插件之外，还有其他的方法。可以阅读前期整理的《再谈Retina下1px的解决方案》<a href="https://www.w3cplus.com/css/fix-1px-for-retina.html/" target="_blank" rel="noopener noreferrer">《再谈Retina下1px的解决方案》<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>一文。</p> <blockquote><p>特别声明：由于有一些低端机对border-image支持度不够友好，个人建议你使用background-image的这个方案。</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frame/Vue/" class="prev router-link-active">Vue 使用中的技巧 (-)</a></span> <span class="next"><a href="/frame/Vue/如何构建运行良好的Vue组件.html">如何构建运行良好的Vue组件</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5c21f1ce.js" defer></script><script src="/assets/js/2.25b27612.js" defer></script><script src="/assets/js/35.5c1980ae.js" defer></script>
  </body>
</html>

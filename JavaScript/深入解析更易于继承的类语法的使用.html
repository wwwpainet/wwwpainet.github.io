<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>深入解析易于继承的类语法的使用 | WP-docs</title>
    <meta name="description" content="Welcome to my docs">
    
    
    <link rel="preload" href="/assets/css/0.styles.de3e197a.css" as="style"><link rel="preload" href="/assets/js/app.5c21f1ce.js" as="script"><link rel="preload" href="/assets/js/2.25b27612.js" as="script"><link rel="preload" href="/assets/js/32.748452ad.js" as="script"><link rel="prefetch" href="/assets/js/10.71a6485a.js"><link rel="prefetch" href="/assets/js/11.8dd74bb4.js"><link rel="prefetch" href="/assets/js/12.9b799416.js"><link rel="prefetch" href="/assets/js/13.c9cf029f.js"><link rel="prefetch" href="/assets/js/14.8882fdec.js"><link rel="prefetch" href="/assets/js/15.56c79fdc.js"><link rel="prefetch" href="/assets/js/16.c020c19c.js"><link rel="prefetch" href="/assets/js/17.948ecd99.js"><link rel="prefetch" href="/assets/js/18.d45c2b4c.js"><link rel="prefetch" href="/assets/js/19.fc0b80a4.js"><link rel="prefetch" href="/assets/js/20.36066d65.js"><link rel="prefetch" href="/assets/js/21.3d5137da.js"><link rel="prefetch" href="/assets/js/22.bb233a83.js"><link rel="prefetch" href="/assets/js/23.f5c9008c.js"><link rel="prefetch" href="/assets/js/24.3552b121.js"><link rel="prefetch" href="/assets/js/25.29d8def4.js"><link rel="prefetch" href="/assets/js/26.6e5b3bbc.js"><link rel="prefetch" href="/assets/js/27.17318391.js"><link rel="prefetch" href="/assets/js/28.0eefa9ef.js"><link rel="prefetch" href="/assets/js/29.ecec8995.js"><link rel="prefetch" href="/assets/js/3.9e8a07c9.js"><link rel="prefetch" href="/assets/js/30.34e66b86.js"><link rel="prefetch" href="/assets/js/31.7d45bd5b.js"><link rel="prefetch" href="/assets/js/33.f4b89b95.js"><link rel="prefetch" href="/assets/js/34.d51375bc.js"><link rel="prefetch" href="/assets/js/35.5c1980ae.js"><link rel="prefetch" href="/assets/js/36.d793beef.js"><link rel="prefetch" href="/assets/js/37.d7c40923.js"><link rel="prefetch" href="/assets/js/38.472d02b7.js"><link rel="prefetch" href="/assets/js/4.6f6e2024.js"><link rel="prefetch" href="/assets/js/5.be0f20bf.js"><link rel="prefetch" href="/assets/js/6.8bbc05a5.js"><link rel="prefetch" href="/assets/js/7.80024fef.js"><link rel="prefetch" href="/assets/js/8.59ce47c5.js"><link rel="prefetch" href="/assets/js/9.1660c366.js">
    <link rel="stylesheet" href="/assets/css/0.styles.de3e197a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">WP-docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link router-link-active">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/CSS/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/Vue/" class="nav-link">Vue</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link router-link-active">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/CSS/" class="nav-link">CSS</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/Vue/" class="nav-link">Vue</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ES6</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/JavaScript/" class="sidebar-link">ES6使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/#声明变量的新姿势" class="sidebar-link">声明变量的新姿势</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#动态字符串" class="sidebar-link">动态字符串</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#解构赋值的骚操作" class="sidebar-link">解构赋值的骚操作</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#关于对象的细节" class="sidebar-link">关于对象的细节</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#数组" class="sidebar-link">数组</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#函数" class="sidebar-link">函数</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#object？map！" class="sidebar-link">Object？Map！</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#更加简洁直观class语法" class="sidebar-link">更加简洁直观class语法</a></li><li class="sidebar-sub-header"><a href="/JavaScript/#模块化" class="sidebar-link">模块化</a></li></ul></li><li><a href="/JavaScript/深入解析更易于继承的类语法的使用.html" class="active sidebar-link">深入解析易于继承的类语法的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JavaScript/深入解析更易于继承的类语法的使用.html#一、类的基本定义" class="sidebar-link">一、类的基本定义</a></li><li class="sidebar-sub-header"><a href="/JavaScript/深入解析更易于继承的类语法的使用.html#二、更灵活的类" class="sidebar-link">二、更灵活的类</a></li><li class="sidebar-sub-header"><a href="/JavaScript/深入解析更易于继承的类语法的使用.html#三、类的继承" class="sidebar-link">三、类的继承</a></li><li class="sidebar-sub-header"><a href="/JavaScript/深入解析更易于继承的类语法的使用.html#四、类的静态成员" class="sidebar-link">四、类的静态成员</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript方法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>插件</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="深入解析易于继承的类语法的使用"><a href="#深入解析易于继承的类语法的使用" aria-hidden="true" class="header-anchor">#</a> 深入解析易于继承的类语法的使用</h1> <p>####和其它面向对象编程语言一样，ES6 正式定义了 class 类以及 extend 继承语法糖，并且支持静态、派生、抽象、迭代、单例等，而且根据 ES6 的新特性衍生出很多有趣的用法。</p> <h2 id="一、类的基本定义"><a href="#一、类的基本定义" aria-hidden="true" class="header-anchor">#</a> 一、类的基本定义</h2> <p>基本所有面向对象的语言都支持类的封装与继承，那什么是类？
类是面向对象程序设计的基础，包含数据封装、数据操作以及传递消息的函数。类的实例称为对象。
ES5 之前通过函数来模拟类的实现如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 构造函数</span>
<span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 原型上的方法</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 前端全栈开发</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> friend <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'前端全栈开发'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
friend<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friend <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//  true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friend <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="总结来说，定义一个类的思路如下："><a href="#总结来说，定义一个类的思路如下：" aria-hidden="true" class="header-anchor">#</a> 总结来说，定义一个类的思路如下：</h4> <ol><li>需要构造函数封装数据</li> <li>在原型上添加方法操作数据，</li> <li>通过New创建实例</li></ol> <p>ES6 使用class关键字定义一个类，这个类有特殊的方法名[[Construct]]定义构造函数，在 new 创建实例时调用的就是[[Construct]]，示例如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ES6</span>
<span class="token comment">// 等价于 let Person = class {</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token comment">// 构造函数</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 等价于Person.prototype.sayName</span>
    <span class="token function">sayName</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 前端全栈开发</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> Person<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// function</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>sayName<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// function</span>

<span class="token keyword">let</span> friend <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'前端全栈开发'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

friend<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friend <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friend <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>上面的例子中class定义的类与自定义的函数模拟类功能上貌似没什么不同，但本质上还有很大差异的：</p> <ol><li>函数声明可以被提升，但是class类声明与let类似，不能被提升；</li> <li>类声明自动运行在严格模式下，“use strict”；</li> <li>类中所有方法都是不可枚举的，enumerable 为 false</li></ol> <h2 id="二、更灵活的类"><a href="#二、更灵活的类" aria-hidden="true" class="header-anchor">#</a> 二、更灵活的类</h2> <p>类和函数一样，是JavaScript的一等公民（可以传入函数、从函数返回、赋值），并且注意到类与对象字面量还有更多相似之处，这些特点可以扩展出类更灵活的定义与使用。</p> <h4 id="_2-1-拥有访问器属性"><a href="#_2-1-拥有访问器属性" aria-hidden="true" class="header-anchor">#</a> 2.1 拥有访问器属性</h4> <p>对象的属性有数据属性和访问属性，类中也可以通过get、set关键字定义访问器属性：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">get</span> <span class="token function">value</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">set</span> <span class="token function">value</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> friend <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'前端全栈开发: '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 调用的是 setter</span>
friend<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token comment">// 调用的是 getter</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friend<span class="token punctuation">.</span>value<span class="token punctuation">)</span>   <span class="token comment">// 前端全栈开发: 18</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="_2-2-可计算的成员名称"><a href="#_2-2-可计算的成员名称" aria-hidden="true" class="header-anchor">#</a> 2.2 可计算的成员名称</h4> <p>类似 ES6 对象字面量扩展的可计算属性名称，类也可以用[表达式]定义可计算成员名称，包括类中的方法和访问器属性：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> methodName <span class="token operator">=</span> <span class="token string">'sayName'</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span>methodName <span class="token operator">+</span> <span class="token string">'Default'</span><span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">get</span> <span class="token punctuation">[</span>methodName<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">set</span> <span class="token punctuation">[</span>methodName<span class="token punctuation">]</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> str<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> friend <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'前端全栈开发'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 方法</span>
friend<span class="token punctuation">.</span><span class="token function">sayNameDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 前端全栈开发</span>
<span class="token comment">// 访问器属性</span>
friend<span class="token punctuation">.</span>sayName <span class="token operator">=</span> <span class="token string">'lee'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friend<span class="token punctuation">.</span>sayName<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// lee</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="_2-3-定义默认迭代器"><a href="#_2-3-定义默认迭代器" aria-hidden="true" class="header-anchor">#</a> 2.3 定义默认迭代器</h4> <p>ES6 中常用的集合对象（数组、Set/Map集合）和字符串都是可迭代对象，如果类是用来表示值这些可迭代对象的，那么定义一个默认迭代器会更有用。
ES6 通过给Symbol.iterator属性添加生成器的方式，定义默认迭代器：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token operator">*</span><span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">yield</span> item<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> addrName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'j'</span><span class="token punctuation">,</span> <span class="token string">'j'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>addrName<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Person { name: Set { 'j', 'e', 'n', 'y' } }</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token keyword">of</span> addrName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// j e n y</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>addrName<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// j e n y</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>定义默认迭代器后类的实例就可以使用for-of循环和展开运算符（...）等迭代功能。</p> <h4 id="_2-5-创建单例"><a href="#_2-5-创建单例" aria-hidden="true" class="header-anchor">#</a> 2.5 创建单例</h4> <p>使用类语法创建单例的方式通过new立即调用类表达式：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">class</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token string">'前端全栈开发'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>singleton<span class="token punctuation">.</span>name<span class="token punctuation">)</span>   <span class="token comment">// 前端全栈开发</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这里先创建匿名类表达式，然后 new 调用这个类表达式，并通过小括号立即执行，这种类语法创建的单例不会在作用域中暴露类的引用。</p> <h2 id="三、类的继承"><a href="#三、类的继承" aria-hidden="true" class="header-anchor">#</a> 三、类的继承</h2> <p>回顾 ES6 之前如何实现继承？常用方式是通过原型链、构造函数以及组合继承等方式。
ES6 的类使用熟悉的extends关键字指定类继承的函数，并且可以通过surpe()方法访问父类的构造函数。</p> <p>例如继承一个 Person 的类：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Friend</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> phone</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>phone <span class="token operator">=</span> phone
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> myFriend <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Friend</span><span class="token punctuation">(</span><span class="token string">'lee'</span><span class="token punctuation">,</span><span class="token number">2233</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myFriend<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Friend { name: 'lee', phone: 2233 }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Friend 继承了 Person，术语上称 Person 为基类，Friend 为派生类。
需要注意的是，surpe()只能在派生类中使用，它负责初始化 this，所以派生类使用 this 之前一定要用surpe()。</p> <h4 id="_3-1-继承内建对象"><a href="#_3-1-继承内建对象" aria-hidden="true" class="header-anchor">#</a> 3.1 继承内建对象</h4> <p>ES6 的类继承可以继承内建对象（Array、Set、Map 等），继承后可以拥有基类的所有内建功能。例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 subarr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// 4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr <span class="token keyword">instanceof</span> <span class="token class-name">MyArray</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>subarr <span class="token keyword">instanceof</span> <span class="token class-name">MyArray</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>注意到上例中，不仅 arr 是派生类 MyArray 的实例，subarr 也是派生类 MyArray 的实例，内建对象继承的实用之处是改变返回对象的类型。
浏览器引擎背后是通过[Symbol.species]属性实现这一行为，它被用于返回函数的静态访问器属性，内建对象定义了[Symbol.species]属性的有 Array、ArrayBuffer、Set、Map、Promise、RegExp、Typed arrays</p> <h4 id="_3-2-继承表达式的类"><a href="#_3-2-继承表达式的类" aria-hidden="true" class="header-anchor">#</a> 3.2 继承表达式的类</h4> <p>目前extends可以继承类和内建对象，但更强大的功能从表达式导出类！
这个表达式要求可以被解析为函数并具有[[Construct]]属性和原型，示例如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Sup</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> val
<span class="token punctuation">}</span>

<span class="token class-name">Sup</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getVal</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'Hello'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Sup</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> der <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Derived</span><span class="token punctuation">(</span><span class="token string">'world'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>der<span class="token punctuation">)</span>    <span class="token comment">// Derived { value: 'world' }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>der<span class="token punctuation">.</span><span class="token function">getVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// Helloworld </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h4 id="_3-3-只能继承的抽象类"><a href="#_3-3-只能继承的抽象类" aria-hidden="true" class="header-anchor">#</a> 3.3 只能继承的抽象类</h4> <p>ES6 引入new.target元属性判断函数是否通过new关键字调用。类的构造函数也可以通过new.target确定类是如何被调用的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 可以通过new.target创建抽象类（不能实例化的类），例如：</span>
<span class="token keyword">class</span> <span class="token class-name">Abstract</span> <span class="token punctuation">{</span>
 <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token operator">===</span> Abstract<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'抽象类（不能直接实例化）'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">class</span> <span class="token class-name">Instantiable</span> <span class="token keyword">extends</span> <span class="token class-name">Abstract</span> <span class="token punctuation">{</span>
 <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// let abs = new Abstract() // Error: 抽象类（不能直接实例化）</span>
 <span class="token keyword">let</span> abs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Instantiable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>abs <span class="token keyword">instanceof</span> <span class="token class-name">Abstract</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>虽然不能直接使用 Abstract 抽象类创建实例，但是可以作为基类派生其它类。</p> <h2 id="四、类的静态成员"><a href="#四、类的静态成员" aria-hidden="true" class="header-anchor">#</a> 四、类的静态成员</h2> <p>ES6 使用static关键字声明静态成员或方法。在类的方法或访问器属性前都可以使用static，唯一的限制是不能用于构造函数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
 <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token keyword">static</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">let</span> beauty <span class="token operator">=</span> Person<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&quot;前端全栈开发&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// beauty.create('lee') // TypeError</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>如果基类有静态成员，那这些静态成员在派生类也可以使用。
例如将上例的 Person 作为基类，派生出 Friend 类并使用基类的静态方法create( )：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Friend</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
 <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">var</span> friend <span class="token operator">=</span> Friend<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'lee'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friend <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friend <span class="token keyword">instanceof</span> <span class="token class-name">Friend</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/JavaScript/" class="prev router-link-active">ES6使用</a></span> <span class="next"><a href="/JavaScript/0-JS开发技巧.html">0-JS开发技巧</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5c21f1ce.js" defer></script><script src="/assets/js/2.25b27612.js" defer></script><script src="/assets/js/32.748452ad.js" defer></script>
  </body>
</html>
